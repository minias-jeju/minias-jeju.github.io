import{P as T,Q as w,R as S,S as B,o as y,U as I,v as A,A as N,V as Y,W as x,q as F,E as U,X as q,Y as C,Z as z,_ as Z,z as $,y as p,a0 as G,a1 as H,b as O,a2 as J,a3 as D,a4 as Q,a5 as V,a6 as W,g as P,h as X,a7 as j,a8 as K,a9 as ee,aa as te,J as se,ab as ae,ac as re,a as ie,ad as fe,ae as ne,af as ce,ag as de}from"./CcHn8L2f.js";class ue{anchor;#t=new Map;#s=new Map;#e=new Map;#a=new Set;#r=!0;constructor(e,s=!0){this.anchor=e,this.#r=s}#i=()=>{var e=T;if(this.#t.has(e)){var s=this.#t.get(e),r=this.#s.get(s);if(r)w(r),this.#a.delete(s);else{var i=this.#e.get(s);i&&(this.#s.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[t,n]of this.#t){if(this.#t.delete(t),t===e)break;const f=this.#e.get(n);f&&(S(f.effect),this.#e.delete(n))}for(const[t,n]of this.#s){if(t===s||this.#a.has(t))continue;const f=()=>{if(Array.from(this.#t.values()).includes(t)){var u=document.createDocumentFragment();Y(n,u),u.append(y()),this.#e.set(t,{effect:n,fragment:u})}else S(n);this.#a.delete(t),this.#s.delete(t)};this.#r||!r?(this.#a.add(t),B(n,f,!1)):f()}}};#f=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[r,i]of this.#e)s.includes(r)||(S(i.effect),this.#e.delete(r))};ensure(e,s){var r=T,i=x();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(i){var t=document.createDocumentFragment(),n=y();t.append(n),this.#e.set(e,{effect:I(()=>s(n)),fragment:t})}else this.#s.set(e,I(()=>s(this.anchor)));if(this.#t.set(r,e),i){for(const[f,c]of this.#s)f===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[f,c]of this.#e)f===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#i),r.ondiscard(this.#f)}else A&&(this.anchor=N),this.#i()}}function le(a,e,s=!1){A&&U();var r=new ue(a),i=s?q:0;function t(n,f){if(A){const u=C(a)===z;if(n===u){var c=Z();$(c),r.anchor=c,p(!1),r.ensure(n,f),p(!0);return}}r.ensure(n,f)}F(()=>{var n=!1;e((f,c=!0)=>{n=!0,t(c,f)}),n||t(!1,null)},i)}function m(a,e){return a===e||a?.[D]===e}function oe(a={},e,s,r){return G(()=>{var i,t;return H(()=>{i=t,t=[],O(()=>{a!==s(...t)&&(e(a,...t),i&&m(s(...i),a)&&e(null,...i))})}),()=>{J(()=>{t&&m(s(...t),a)&&e(null,...t)})}}),a}let b=!1;function he(a){var e=b;try{return b=!1,[a(),b]}finally{b=e}}function ve(a,e,s,r){var i=!ie||(s&fe)!==0,t=(s&re)!==0,n=(s&ce)!==0,f=r,c=!0,u=()=>(c&&(c=!1,f=n?O(r):r),f),_;if(t){var k=D in a||de in a;_=Q(a,e)?.set??(k&&e in a?d=>a[e]=d:void 0)}var l,E=!1;t?[l,E]=he(()=>a[e]):l=a[e],l===void 0&&r!==void 0&&(l=u(),_&&(i&&V(),_(l)));var h;if(i?h=()=>{var d=a[e];return d===void 0?u():(c=!0,d)}:h=()=>{var d=a[e];return d!==void 0&&(f=void 0),d===void 0?f:d},i&&(s&W)===0)return h;if(_){var L=a.$$legacy;return(function(d,v){return arguments.length>0?((!i||!v||L||E)&&_(v?h():d),d):h()})}var g=!1,o=((s&ne)!==0?X:j)(()=>(g=!1,h()));t&&P(o);var M=se;return(function(d,v){if(arguments.length>0){const R=v?P(o):i&&t?K(d):d;return ee(o,R),g=!0,f!==void 0&&(f=R),d}return te&&g||(M.f&ae)!==0?o.v:P(o)})}export{ue as B,oe as b,le as i,ve as p};
